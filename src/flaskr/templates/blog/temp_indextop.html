<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
<title>{% block title %}{% endblock %} - Discussion Board</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="{{ url_for('static', filename='res/layui/css/layui.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='res/css/global.css') }}">
  <script type="text/javascript" src="{{ url_for('static', filename='res/layui/layui.js') }}"></script>
</head>
<body>

<div class="fly-header layui-bg-black">
  <div class="layui-container">
    <a class="fly-logo" href="/">
      <img src="{{ url_for('static', filename='res/images/ics_logo.png') }}" alt="layui">
    </a>
    <ul class="layui-nav fly-nav layui-hide-xs">
      <li class="layui-nav-item layui-this">
        <a href="https://www.ucla.edu/"><i class="iconfont icon-jiaoliu"></i>University of California, Los Angeles</a>
      </li>
      <li class="layui-nav-item">
        <a href="https://www.cs.ucla.edu/"><i class="iconfont icon-iconmingxinganli"></i>UCLA Computer Science Department</a>
      </li>
      <li class="layui-nav-item">
        <a href="http://www.layui.com/" target="_blank"><i class="iconfont icon-ui"></i>Template Source</a>
      </li>
    </ul>
    
    
    <ul class="layui-nav fly-nav-user">
       {% if g.user %}
       <li class="layui-nav-item">
        <a class="fly-nav-avatar" href="{{ url_for('user.home', user_id=g.user['id']) }}">
          <cite class="layui-hide-xs">{{ g.user['nickname'] }}</cite>
          <img src="https://tva1.sinaimg.cn/crop.0.0.118.118.180/5db11ff4gw1e77d3nqrv8j203b03cweg.jpg">
        </a>
      </li>
      <li class="layui-nav-item">
        <a href="{{ url_for('auth.logout') }}">Log Out</a>
      </li>
       {% else %}
      <!-- Not logged in -->
      <li class="layui-nav-item">
        <a class="iconfont icon-touxiang layui-hide-xs" href="{{ url_for('auth.register') }}"></a>
      </li>
      <li class="layui-nav-item">
        <a href="{{ url_for('auth.login') }}">Log In</a>
      </li>
      <li class="layui-nav-item">
        <a href="{{ url_for('auth.register') }}">Register</a>
      </li>
      {% endif %}
    </ul>
  </div>
</div>


<div style="position: absolute;left: 90px; top: 60px" class="layui-container">
<div class="layui-carousel" id="test1" lay-filter="test1">
  <div carousel-item="">
    <div><img src="{{ url_for('static', filename='pic/b.jpg') }}" alt="春天" width = '100%'>
    </div>
    <div><img src="{{ url_for('static', filename='pic/p1.jpg') }}" alt="逸夫楼" width = '100%'>
    </div>
    <div><img src="{{ url_for('static', filename='pic/a.jpg') }}"  alt="机房" width = '100%'>
    </div>   
  </div>
</div> 
</div>

<div style="position: absolute;left: 90px; top: 340px" class="fly-panel fly-column">
  <div class="layui-container">
    <ul class="layui-clear">
      <li class="layui-hide-xs layui-this"><a href="{{ url_for('blog.index') }}">Home Page</a></li>
      {% if g.user %}
      <!-- Display after user login -->
      
      <li class="layui-hide-xs layui-hide-sm layui-show-md-inline-block"><a href="{{ url_for('user.home', user_id=g.user['id']) }}">My Home Page</a></li>
    </ul>

    <div class="fly-column-right layui-hide-xs">
    <div class="layui-input-inline">
    <form action="" method="post" enctype="multipart/form-data">
     <div class="layui-input-inline">
      <input type="test" name="searchkeywords" id="searchkeywords" required lay-verify="required" placeholder="Enter the Name of the Post to Search" autocomplete="off" class="layui-input">
    </div>
    <div class="layui-input-inline">
      <button class="layui-btn" lay-filter="searchname" lay-submit ><i class="layui-icon"></i></button>
      </div>
    </form>
  </div>
    {% if g.user %}
      <a href="{{ url_for('blog.create') }}" class="layui-btn">Publish New Post</a>
    {% endif %}
    </div> 
    {% else %}
    <li class="layui-hide-xs layui-hide-sm layui-show-md-inline-block">Log In for More Functions</li>
    {% endif %}
  </div>
</div>

{% block all_content %}
<canvas id="myCanvas" width="150px" height="500px" horizontalScrollPolicy="off"></canvas>
<div style="position: absolute;left: 90px; top: 405px" class="layui-container">
{% block detail %}{% endblock %}
{% block createNew %}{% endblock %}
<div class="layui-col-md4">

      <div class="fly-panel fly-rank fly-rank-reply" id="LAY_replyRank">
        <h3 class="fly-panel-title">回贴榜</h3><!--Not sure about this part-->
        <dl>
          <!--个人主页还需要写一下-->
          <!--
          {% for user in reply_most_users %} 
          <dd>
            <a href="user/home.html">
              <img src="https://tva1.sinaimg.cn/crop.0.0.118.118.180/5db11ff4gw1e77d3nqrv8j203b03cweg.jpg"><cite>{{ user['nickname'] }}</cite><i>{{ user['replynum'] }}</i>
            </a>
          </dd>
         {% endfor %}
       -->
        </dl>
      </div>

      <dl class="fly-panel fly-list-one">
        <dt class="fly-panel-title">热议榜</dt>
        
        {% for post in hots %}
        <dd>
          <a href="jie/detail.html">{{post['title']}}</a>
          <span><i class="iconfont icon-pinglun1" title="回复数"></i> {{post['num_reply']}}</span>
          <span><i class="layui-icon" title="收藏数">&#xe600;</i>{{ post['num_collect'] }}</span>
          <span><i class="layui-icon" title="点赞数">&#xe6c6;</i>{{ post['num_like'] }}</span>
        </dd>
        {% endfor %}
      
      </dl>

{#      <div class="fly-panel">#}
{#        <h3 class="fly-panel-title">Source Code</h3>#}
{#        <ul class="fly-panel-main fly-list-static">#}
{#          <li>#}
{#            <a href="https://github.com/syhAnna/CS130-Software-Engineering" target="_blank">Source of CatEatPad</a>#}
{#          </li>#}
{#        </ul>#}
{#      </div>#}

</div>


</div>
<script>
  var cav = document.getElementById('myCanvas');
  var w = window.screen.availWidth;
  var h = window.screen.availHeight;
  var yPositions = Array(300).join(0).split('');
  var ctx = cav.getContext('2d');
  var draw = function(){
    ctx.fillStyle = 'rgba(57,61,73,1)';
    ctx.fillRect(0,0,w,h*3);
    ctx.fillStyle = 'rgba(95,184,120,1)';
    ctx.font = '20px';
    yPositions.map(function(y,index){
      text = String.fromCharCode(1e2+Math.random()*330);
      x = index*10;
      cav.getContext('2d').fillText(text,x,y);
      if(y>Math.random()*1e4){
        yPositions[index]=0;
      }else{
        yPositions[index]=y+10;
      }

    });
  }
  cav.setAttribute("width",screen.availWidth);
  cav.setAttribute("height",screen.availHeight*3);
  setInterval('draw()',20);
</script>


{% endblock %}

</body>
</html>


<script>
layui.use('carousel', function(){
  var carousel = layui.carousel;
  //建造实例
  carousel.render({
    elem: '#test1'
    ,width: '100%' //设置容器宽度
    ,arrow: 'always' //始终显示箭头
    //,anim: 'updown' //切换动画方式
  });
});
</script>


